{"version":3,"file":"index.min.js","sources":["../src/main.js"],"sourcesContent":["/* global window */\n/**\n * 缓存处理工具\n */\nimport _ from 'lodash';\nimport { version } from '../package.json';\n\nconst objPrefix = 'joey-obj-';\n\nclass Storage {\n  // 构造函数\n  constructor() {\n    this.version = version;\n    if (!window.localStorage || !window.sessionStorage) {\n      throw new Error('该浏览器不支持，请使用新版Chrome或者Firefox。');\n    } else {\n      this.lsStorage = window.localStorage;\n      this.ssStorage = window.sessionStorage;\n    }\n  }\n\n  /**\n   * localStorage\n   */\n  lsSetValue(key, value) {\n    if (_.isObject(value)) {\n      this.lsStorage.setItem(key, `${objPrefix}${JSON.stringify(value)}`);\n    } else if (_.isNil(value)) {\n      this.lsStorage.setItem(key, '');\n    } else {\n      this.lsStorage.setItem(key, value);\n    }\n  }\n\n  lsGetValue(key) {\n    const value = this.lsStorage.getItem(key);\n    if (!_.isNil(value) && _.startsWith(value, objPrefix)) {\n      const objValue = _.replace(value, objPrefix, '');\n      try {\n        return JSON.parse(objValue);\n      } catch (e) {\n        return value;\n      }\n    } else {\n      return value;\n    }\n  }\n\n  lsRemove(key) {\n    this.lsStorage.removeItem(key);\n  }\n\n  /**\n   * sessionStorage\n   */\n  ssSetValue(key, value) {\n    if (_.isObject(value)) {\n      this.ssStorage.setItem(key, `${objPrefix}${JSON.stringify(value)}`);\n    } else if (_.isNil(value)) {\n      this.ssStorage.setItem(key, '');\n    } else {\n      this.ssStorage.setItem(key, value);\n    }\n  }\n\n  ssGetValue(key) {\n    const value = this.ssStorage.getItem(key);\n    if (!_.isNil(value) && _.startsWith(value, objPrefix)) {\n      const objValue = _.replace(value, objPrefix, '');\n      try {\n        return JSON.parse(objValue);\n      } catch (e) {\n        return value;\n      }\n    } else {\n      return value;\n    }\n  }\n\n  ssRemove(key) {\n    this.ssStorage.removeItem(key);\n  }\n\n  /**\n   * common\n   */\n  clearAll() {\n    this.lsStorage.clear();\n    this.ssStorage.clear();\n  }\n}\n\nexport default new Storage();\n"],"names":["objPrefix","version","window","localStorage","sessionStorage","Error","lsStorage","ssStorage","key","value","_","isObject","setItem","JSON","stringify","isNil","this","getItem","startsWith","objValue","replace","parse","e","removeItem","clear"],"mappings":"qbAOMA,EAAY,mBAqFH,yIAhFNC,iBACAC,OAAOC,eAAiBD,OAAOE,qBAC5B,IAAIC,MAAM,sCAEXC,UAAYJ,OAAOC,kBACnBI,UAAYL,OAAOE,yGAOjBI,EAAKC,GACVC,EAAEC,SAASF,QACRH,UAAUM,QAAQJ,YAAQR,UAAYa,KAAKC,UAAUL,KACjDC,EAAEK,MAAMN,QACZH,UAAUM,QAAQJ,EAAK,SAEvBF,UAAUM,QAAQJ,EAAKC,sCAIrBD,OACHC,EAAQO,KAAKV,UAAUW,QAAQT,MAChCE,EAAEK,MAAMN,KAAUC,EAAEQ,WAAWT,EAAOT,UAQlCS,MAPDU,EAAWT,EAAEU,QAAQX,EAAOT,EAAW,eAEpCa,KAAKQ,MAAMF,GAClB,MAAOG,UACAb,oCAOJD,QACFF,UAAUiB,WAAWf,sCAMjBA,EAAKC,GACVC,EAAEC,SAASF,QACRF,UAAUK,QAAQJ,YAAQR,UAAYa,KAAKC,UAAUL,KACjDC,EAAEK,MAAMN,QACZF,UAAUK,QAAQJ,EAAK,SAEvBD,UAAUK,QAAQJ,EAAKC,sCAIrBD,OACHC,EAAQO,KAAKT,UAAUU,QAAQT,MAChCE,EAAEK,MAAMN,KAAUC,EAAEQ,WAAWT,EAAOT,UAQlCS,MAPDU,EAAWT,EAAEU,QAAQX,EAAOT,EAAW,eAEpCa,KAAKQ,MAAMF,GAClB,MAAOG,UACAb,oCAOJD,QACFD,UAAUgB,WAAWf,2CAOrBF,UAAUkB,aACVjB,UAAUiB"}